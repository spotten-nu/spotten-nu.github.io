(this.webpackJsonpspotten=this.webpackJsonpspotten||[]).push([[0],{113:function(t,e){},115:function(t,e){},129:function(t,e,i){"use strict";i.r(e);var n=i(0),o=i.n(n),a=i(11),r=i.n(a),s=(i(98),i(40)),d=i.n(s),c=i(54),l=i(58),h=i(9),u=i(169),f=i(173),p=i(166),v=i(176),g=i(171),m=i(178),w=i(170),x=i(174),j=i(177),O=i(168),b=i(83),T=i.n(b),k=i(5);var M=function(t){var e,i=t.label,n=t.helperText,o=t.value,a=t.defaultValue,r=t.onChange,s=t.className,d=t.unit,c=t.step,l=t.min,h=t.max;return Object(k.jsx)(x.a,{name:"noname",type:"number",label:i,helperText:n,className:s,fullWidth:!0,value:Math.round(10*(null!==(e=null!==o&&void 0!==o?o:a)&&void 0!==e?e:0))/10,onChange:function(t){return null===r||void 0===r?void 0:r(Number(t.target.value))},disabled:void 0===o,inputProps:{step:c,min:l,max:h},InputLabelProps:{disabled:!1},InputProps:{endAdornment:Object(k.jsxs)(j.a,{position:"end",children:[d,Object(k.jsx)(O.a,{color:void 0===o?"default":"secondary",onClick:function(t){return null===r||void 0===r?void 0:r(void 0===o?a:void 0)},children:Object(k.jsx)(T.a,{fontSize:"small"})})]})}})};var y=function(t){var e,i=t.label,o=t.helperText,a=t.value,r=t.onChange,s=t.className,d=t.error,c=Object(n.useState)(),h=Object(l.a)(c,2),u=h[0],f=h[1];return Object(k.jsx)(x.a,{label:i,helperText:o,placeholder:"E.g. 270/8kt",className:s,value:null!==u&&void 0!==u?u:a?"".concat(a.direction,"/").concat(null!==(e=a.speed)&&void 0!==e?e:0,"kt"):"",onChange:function(t){f(t.target.value);var e=function(t){var e=/^([\d.,]+)\/([\d.,]+)(kt)?$/.exec(t);if(e){var i=Math.round(Number(e[1])),n=Math.round(Number(e[2]));if(i>=0&&i<=360&&n>=0)return{direction:0===i?360:i,speed:n}}return null}(t.target.value);e&&(null===r||void 0===r||r(e))},onBlur:function(){return f(void 0)},error:d})},P=Object(u.a)({paper:{width:200},form:{margin:12},header:{marginTop:25},input:{marginTop:8},print:{marginTop:25,textAlign:"center"}});var I=function(t){var e=t.dropzones,i=t.state,n=t.dispatch,o=t.spot,a=t.onPrint,r=P();return Object(k.jsx)(f.a,{variant:"permanent",anchor:"left",PaperProps:{elevation:24},classes:{paper:r.paper},children:Object(k.jsxs)("form",{autoComplete:"off",className:r.form,children:[Object(k.jsxs)(p.a,{fullWidth:!0,children:[Object(k.jsx)(v.a,{children:"Dropzone"}),Object(k.jsx)(g.a,{value:i.dropzone.id,onChange:function(t){return n({type:"dropzone",id:t.target.value})},children:null===e||void 0===e?void 0:e.map((function(t){return Object(k.jsx)(m.a,{value:t.id,children:t.name},t.id)}))})]}),Object(k.jsx)("div",{className:r.header,children:"Winds"}),Object(k.jsx)(y,{label:"FL100",value:i.winds.fl100,onChange:function(t){return n({type:"winds",winds:Object(h.a)(Object(h.a)({},i.winds),{},{fl100:t})})},className:r.input,error:!i.winds.fl100}),Object(k.jsx)(y,{label:"2000 ft",value:i.winds["2000ft"],onChange:function(t){return n({type:"winds",winds:Object(h.a)(Object(h.a)({},i.winds),{},{"2000ft":t})})},className:r.input,error:!i.winds["2000ft"]}),Object(k.jsx)(y,{label:"Ground",value:i.winds.ground,onChange:function(t){return n({type:"winds",winds:Object(h.a)(Object(h.a)({},i.winds),{},{ground:t})})},className:r.input,error:!i.winds.ground}),Object(k.jsx)("div",{className:r.header,children:"Spot"}),Object(k.jsx)(M,{label:"Landing direction",unit:"\xb0",step:10,min:10,max:360,value:i.fixedParams.landingDirection,defaultValue:null===o||void 0===o?void 0:o.landingDirection,onChange:function(t){return n({type:"fixedParams",fixedParams:Object(h.a)(Object(h.a)({},i.fixedParams),{},{landingDirection:t})})},className:r.input}),Object(k.jsx)(M,{label:"Line of flight",unit:"\xb0",step:5,min:5,max:360,value:i.fixedParams.lineOfFlight,defaultValue:null===o||void 0===o?void 0:o.lineOfFlight,onChange:function(t){return n({type:"fixedParams",fixedParams:Object(h.a)(Object(h.a)({},i.fixedParams),{},{lineOfFlight:t})})},className:r.input}),Object(k.jsx)(M,{label:"Off track",helperText:"Positive right of track",unit:"NM",step:.1,value:i.fixedParams.offTrack,defaultValue:null===o||void 0===o?void 0:o.offTrack,onChange:function(t){return n({type:"fixedParams",fixedParams:Object(h.a)(Object(h.a)({},i.fixedParams),{},{offTrack:t})})},className:r.input}),Object(k.jsx)(M,{label:"Distance",helperText:"Positive past DZ",unit:"NM",step:.1,value:i.fixedParams.distance,defaultValue:null===o||void 0===o?void 0:o.distance,onChange:function(t){return n({type:"fixedParams",fixedParams:Object(h.a)(Object(h.a)({},i.fixedParams),{},{distance:t})})},className:r.input}),Object(k.jsx)("div",{className:r.print,children:Object(k.jsx)(w.a,{variant:"contained",color:"primary",onClick:a,children:"Print"})})]})})};var S=function(t){var e=t.state,i=t.spot;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("div",{style:{position:"fixed",width:"100%",height:"100%",backgroundImage:"url(".concat(e.dropzone.url,")"),backgroundPosition:"center",backgroundSize:"cover",filter:"blur(calc(0.4vw))"}}),Object(k.jsxs)("div",{style:{position:"absolute",top:50,left:300},children:[Object(k.jsx)("h1",{children:"TODO: Live map preview"}),Object(k.jsx)("p",{children:"For now, here is the raw data:"}),Object(k.jsx)("pre",{style:{fontSize:10},children:JSON.stringify(Object(h.a)(Object(h.a)({},e),{},{spot:i}),void 0,4)})]})]})},D=[{id:"vargarda",name:"V\xe5rg\xe5rda",allowedLandingDirections:[40,220],url:"/maps/vargarda.png",width:1436,height:1e3},{id:"nasinge",name:"N\xe4singe",allowedLandingDirections:[30,210],url:"/maps/nasinge.png",width:1436,height:1e3},{id:"skovde",name:"Sk\xf6vde",allowedLandingDirections:[10,190],url:"/maps/skovde.png",width:1436,height:1e3},{id:"koster",name:"Koster",url:"/maps/koster.png",width:1436,height:1e3}],C=i(84),L=i(59),z=i(37),W=i(38),F=function(t){return t/180*Math.PI},N=function(t){return.3048*t},H=function(t){return 1852*t/3600},A=function(t){return t/1852},B=function(t){return 1852*t},R=function(t){return t/Math.PI*180};function G(t){for(;t<0;)t+=2*Math.PI;for(;t>=2*Math.PI;)t-=2*Math.PI;return t}function E(t){for(;t<=Math.PI;)t+=2*Math.PI;for(;t>Math.PI;)t-=2*Math.PI;return t}var V=i(85),q=i.n(V);function J(t){return X.apply(this,arguments)}function X(){return(X=Object(c.a)(d.a.mark((function t(e){var i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=q()(),new Y(e,i),t.abrupt("return",new Promise((function(t){return i.on("finish",(function(){return t(i.toBlobURL("application/pdf"))}))})));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Y=function(){function t(e,i){Object(z.a)(this,t),this.data=e,this.mapScale=4e-5,this.doc=void 0,this.width=void 0,this.height=void 0,this.pilotInfoWidth=0,this.pilotInfoHeight=0,this.windInfoWidth=0,this.windInfoHeight=0,this.jumperInfoWidth=0,this.jumperInfoHeight=0,this.footerWidth=0,this.footerHeight=0;this.doc=new PDFDocument({size:"a4",layout:"landscape",margin:6/25.4*72,info:{Title:"Spot"}}),this.doc.pipe(i),this.doc.scale(72/25.4).translate(6,6),this.width=285,this.height=198,this.renderPilotInfo(),this.renderWinds(),this.renderJumperInfo(),this.renderFooter(),this.renderMap(),this.doc.end()}return Object(W.a)(t,[{key:"renderPilotInfo",value:function(){var t=this.data,e=t.spot,i=e.heading,n=e.transverseOffset,o=e.longitudinalOffset,a=t.redLight,r=(o>0?"+":"")+o.toFixed(1),s="Green light ".concat(K(i),"  ").concat(r," NM");if(this.doc.fontSize(6).text(s,0,0),this.pilotInfoWidth=this.doc.widthOfString(s)+.5,0!==n){var d=n>0?"Right":"Left",c=Math.abs(n).toFixed(1);this.doc.text("".concat(d," off track  ").concat(c," NM"))}this.doc.fontSize(3).text("Red light:  ".concat(K(a.bearing),"  ").concat(a.distance.toFixed(1)," NM")),this.pilotInfoHeight=this.doc.y}},{key:"renderWinds",value:function(){this.doc.fontSize(3);var t=Object(L.a)(this.data.winds).reverse();this.windInfoHeight=-1.5,this.windInfoWidth=21,this.doc.save(),this.doc.translate(0,this.height);var e,i=Object(C.a)(t);try{for(i.s();!(e=i.n()).done;){var n=e.value;this.windInfoHeight+=30,this.doc.translate(0,-30),this.renderOneWind(n)}}catch(o){i.e(o)}finally{i.f()}this.doc.restore()}},{key:"renderOneWind",value:function(t){var e=t.altitudeDescr,i=t.speed,n=t.direction;this.doc.fontSize(3),this.doc.text(e,0,2.5,{width:20,align:"center"}),this.doc.text("".concat(n.toFixed(0),"\xb0 / ").concat(i.toFixed(0)," kt"),{width:20,align:"center"}),this.doc.save().translate(10.5,19.5),this.doc.circle(0,0,10).lineWidth(.3).stroke("#d0d0d0");for(var o=0;o<8;o++)this.doc.rotate(45).moveTo(0,10).lineTo(0,8.5).stroke();var a=H(i);this.doc.fontSize(4).text(a.toFixed(0),-5,-1.5,{width:10,align:"center"}),a>=.5&&this.doc.rotate(n).moveTo(0,-9.5).lineTo(0,-3.5).lineWidth(1).stroke("black").moveTo(0,-2.5).lineTo(-1.6,-5).lineTo(1.6,-5).closePath().fill("black"),this.doc.restore()}},{key:"renderJumperInfo",value:function(){this.doc.fontSize(5);var t="".concat(this.data.timeBetweenGroups," seconds between groups");this.jumperInfoWidth=this.doc.widthOfString(t)+1,this.jumperInfoHeight=this.doc.heightOfString(t),this.doc.text(t,this.windInfoWidth+.3,this.height-this.jumperInfoHeight+1)}},{key:"renderFooter",value:function(){var t=Intl.DateTimeFormat("sv-SE",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"}).format(this.data.time),e="".concat(t,"     spotten.nu     Map: \xa9 OpenStreetMap contributors");this.doc.fontSize(3);var i=this.doc.widthOfString(e),n=this.doc.heightOfString(e);this.doc.text(t+"     ",this.width-i-.3,this.height-n+.7,{continued:!0}).text("spotten.nu",{link:"https://spotten.nu/",continued:!0}).text("     Map: \xa9 ",{link:null,continued:!0}).text("OpenStreetMap",{link:"https://www.openstreetmap.org/copyright",continued:!0}).text(" contributors",{link:null}),this.footerWidth=i+1,this.footerHeight=n}},{key:"renderMap",value:function(){this.doc.save(),this.traceOutline(),this.doc.clip();var t=this.data.map,e=t.imageData,i=t.metersPerPixel,n=t.width,o=t.height,a=t.dz;this.doc.save().translate(this.width/2,this.height/2).scale(1e3*this.mapScale).image(e,-a.x*i,-a.y*i,{width:n*i,height:o*i}).restore(),this.renderSpot(),this.renderScale(),this.traceOutline(),this.doc.lineWidth(.25).stroke("#e0e0e0"),this.doc.restore()}},{key:"traceOutline",value:function(){this.doc.moveTo(this.pilotInfoWidth,0).lineTo(this.width,0).lineTo(this.width,this.height-this.footerHeight).lineTo(this.width-this.footerWidth,this.height-this.footerHeight).lineTo(this.width-this.footerWidth,this.height).lineTo(this.windInfoWidth+this.jumperInfoWidth,this.height).lineTo(this.windInfoWidth+this.jumperInfoWidth,this.height-this.jumperInfoHeight).lineTo(this.windInfoWidth,this.height-this.jumperInfoHeight).lineTo(this.windInfoWidth,this.height-this.windInfoHeight).lineTo(0,this.height-this.windInfoHeight).lineTo(0,this.pilotInfoHeight).lineTo(this.pilotInfoWidth,this.pilotInfoHeight).closePath()}},{key:"renderSpot",value:function(){this.doc.save().translate(this.width/2,this.height/2).scale(1e3*this.mapScale,-1e3*this.mapScale),this.doc.lineWidth(10).circle(this.data.deplCircle.x,this.data.deplCircle.y,this.data.deplCircle.radius).stroke("#a0a0a0").circle(this.data.exitCircle.x,this.data.exitCircle.y,this.data.exitCircle.radius).stroke("black"),this.doc.moveTo(-25,-25).lineTo(25,25).moveTo(25,-25).lineTo(-25,25).lineWidth(15).stroke(),this.doc.rotate(-this.data.spot.heading).translate(B(this.data.spot.transverseOffset),0).moveTo(0,-2e3).lineTo(0,2e3).moveTo(-100,1900).lineTo(0,2e3).lineTo(100,1900).lineWidth(25).stroke().circle(0,B(this.data.spot.longitudinalOffset),40).lineWidth(10).stroke(),this.doc.restore()}},{key:"renderScale",value:function(){var t=Intl.NumberFormat("sv-SE",{maximumFractionDigits:0}).format(1/this.mapScale);this.doc.save().translate(this.width,this.height-this.footerHeight).scale(1e3*this.mapScale).translate(-1120,-150),this.doc.moveTo(0,0).lineTo(1e3,0).moveTo(0,-50).lineTo(0,50).moveTo(100,-30).lineTo(100,0).moveTo(200,-30).lineTo(200,0).moveTo(300,-30).lineTo(300,0).moveTo(400,-30).lineTo(400,0).moveTo(500,-50).lineTo(500,0).moveTo(1e3,-50).lineTo(1e3,0).moveTo(B(.1),30).lineTo(B(.1),0).moveTo(B(.2),30).lineTo(B(.2),0).moveTo(B(.3),30).lineTo(B(.3),0).moveTo(B(.4),30).lineTo(B(.4),0).moveTo(B(.5),50).lineTo(B(.5),0).lineWidth(8).stroke("black"),this.doc.fontSize(70).text("500 m",300,-110,{width:400,align:"center"}).text("1 km",800,-110,{width:400,align:"center"}).text("0.5 NM",B(.5)-200,60,{width:400,align:"center"}),this.doc.text("1 : ".concat(t),-500,-20,{align:"right",width:460}),this.doc.restore()}}]),t}();function K(t){return(t=Math.round(t))<=0&&(t+=360),"00".concat(t).slice(-3)+"\xb0"}var U=function(){function t(e){if(Object(z.a)(this,t),this.winds=void 0,e.length<1)throw new Error("At least one wind is required");this.winds=Object(L.a)(e).sort((function(t,e){return t.altitude-e.altitude}))}return Object(W.a)(t,[{key:"at",value:function(t){if(t<=this.winds[0].altitude)return this.winds[0];for(var e=1;e<this.winds.length;e++)if(t<this.winds[e].altitude)return this.interpolate(this.winds[e-1],this.winds[e],t);return this.winds[this.winds.length-1]}},{key:"interpolate",value:function(t,e,i){var n=(i-t.altitude)/(e.altitude-t.altitude),o=(1-n)*t.speed+n*e.speed,a=E(e.direction-t.direction);return{altitude:i,direction:G(t.direction+n*a),speed:o}}}]),t}(),Z=function(){function t(e){Object(z.a)(this,t),this.wind=void 0,this.config=void 0,this.fixedTrack=void 0,this.fixedTransverseOffset=void 0,this.allowedLandingDirections=void 0,this.wind=new U(e.winds),this.fixedTrack=e.fixedTrack,this.fixedTransverseOffset=e.fixedTransverseOffset,this.allowedLandingDirections=e.allowedLandingDirections,this.config=Object(h.a)(Object(h.a)({},_),e.config)}return Object(W.a)(t,[{key:"calculate",value:function(){var t=this.getLandingDirection(),e=this.calculateDeploymentCircle(t),i=this.calculateFreeFall(),n=i.driftX,o=i.driftY,a=i.throwDistance,r=Object(h.a)({},e);r.x-=n,r.y-=o;var s=this.calculateSpot(r);r.x-=a*Math.sin(s.track),r.y-=a*Math.cos(s.track),s.longitudinalOffset-=a;var d=this.wind.at(this.config.exitAltitude),c=$(s.track,this.config.jumpRunTAS,d).speed;return s.longitudinalOffset-=this.config.greenLightTime*c,s.longitudinalOffset=B(.1)*Math.round(s.longitudinalOffset/B(.1)),{track:s.track,longitudinalOffset:s.longitudinalOffset,transverseOffset:s.transverseOffset,landingDirection:t,deplCircle:e,exitCircle:r,redLight:this.calculateRedLight(s.track,s.longitudinalOffset,c),timeBetweenGroups:this.getTimeBetweenGroups(s.track),jumpRunDuration:c>0?s.jumpRunLength/c:0}}},{key:"calculateDeploymentCircle",value:function(t){for(var e=0,i=0,n=0,o=0;e<this.config.deplAltitude;){var a=this.wind.at(e);if(e<this.config.finalAltitude){var r=$(t,this.config.horizontalCanopySpeed,a),s=r.speed,d=r.direction;i-=s*Math.sin(d)*1,n-=s*Math.cos(d)*1}else i+=a.speed*Math.sin(a.direction)*1,n+=a.speed*Math.cos(a.direction)*1,o+=1*this.config.horizontalCanopySpeed;e+=1*this.config.verticalCanopySpeed}return{x:i,y:n,radius:o}}},{key:"getLandingDirection",value:function(){var t=this.wind.at(0).direction;return this.allowedLandingDirections?this.allowedLandingDirections.map((function(e){return{ld:e,delta:Math.abs(E(t-e))}})).sort((function(t,e){return t.delta-e.delta}))[0].ld:t}},{key:"calculateFreeFall",value:function(){for(var t=.2,e=0,i=this.config.exitAltitude,n=this.config.jumpRunTAS,o=0,a=0,r=0;i>this.config.deplAltitude;){var s=this.wind.at(i);a-=s.speed*Math.sin(s.direction)*t,r-=s.speed*Math.cos(s.direction)*t;var d=Math.sqrt(Math.pow(n,2)+Math.pow(o,2)),c=Q(d,i);e+=n*t,i-=o*t,d>0&&(n-=n/d*c*t,o-=o/d*c*t),o+=9.81*t}return{driftX:a,driftY:r,throwDistance:e}}},{key:"calculateSpot",value:function(t){var e=this.fixedTrack,i=this.fixedTransverseOffset;if(void 0===i){var n,o=this.wind.at(this.config.exitAltitude).direction;e=null!==(n=e)&&void 0!==n?n:G(F(5)*Math.round(o/F(5))),i=t.x*Math.cos(e)-t.y*Math.sin(e),i=B(.1)*Math.round(i/B(.1))}else void 0===e&&(e=Math.atan2(t.x,t.y)-Math.asin(i/Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))),e=G(F(5)*Math.round(e/F(5))));var a=t.x-i*Math.cos(e),r=t.y+i*Math.sin(e),s=a*Math.sin(e)+r*Math.cos(e),d=Math.sqrt(Math.pow(s,2)-Math.pow(a,2)-Math.pow(r,2)+Math.pow(t.radius,2)),c=s-d;if(isNaN(c))throw new Error("The jump run does not intersect the exit circle");return{track:e,longitudinalOffset:c,transverseOffset:i,jumpRunLength:2*d}}},{key:"calculateRedLight",value:function(t,e,i){return{bearing:G(t+Math.PI),distance:B(.1)*Math.round((e+this.config.redLightTime*i)/B(.1))}}},{key:"getTimeBetweenGroups",value:function(t){var e=this.wind.at(this.config.exitAltitude),i=this.wind.at(this.config.deplAltitude),n=this.config.metersBetweenGroups/($(t,this.config.jumpRunTAS,e).speed+i.speed*Math.cos(i.direction-t));return Math.ceil(Math.max(this.config.minTimeBetweenGroups,n))}}]),t}();function $(t,e,i){var n=Math.sqrt(Math.pow(e,2)-Math.pow(i.speed*Math.sin(i.direction-t),2));return isNaN(n)?{speed:e-i.speed,direction:i.direction}:{speed:n-i.speed*Math.cos(i.direction-t),direction:t}}function Q(t,e){return.003*(1.225*Math.pow(288.15/(288.15-.0065*e),-4.25758314356246))*Math.pow(t,2)}var _={exitAltitude:4e3,deplAltitude:700,finalAltitude:100,jumpRunTAS:H(93),redLightTime:150,greenLightTime:10,horizontalCanopySpeed:9,verticalCanopySpeed:4,metersBetweenGroups:250,minTimeBetweenGroups:5},tt={dropzone:D[0],winds:{fl100:void 0,"2000ft":void 0,ground:void 0},fixedParams:{landingDirection:void 0,lineOfFlight:void 0,offTrack:void 0,distance:void 0},config:_};function et(t,e){switch(e.type){case"dropzone":var i=D.find((function(t){return t.id===e.id}));return Object(h.a)(Object(h.a)({},t),{},{fixedParams:tt.fixedParams,dropzone:null!==i&&void 0!==i?i:t.dropzone});case"winds":return Object(h.a)(Object(h.a)({},t),{},{winds:e.winds});case"fixedParams":return Object(h.a)(Object(h.a)({},t),{},{fixedParams:e.fixedParams});case"config":return Object(h.a)(Object(h.a)({},t),{},{config:e.config})}}function it(){return(it=Object(c.a)(d.a.mark((function t(e,i){var n,o,a,r,s,c,l,h,u,f,p,v,g,m,w,x;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.dropzone.url);case 2:return g=t.sent,t.next=5,g.arrayBuffer();case 5:return m=t.sent,t.next=8,J({map:{imageData:m,metersPerPixel:5,width:e.dropzone.width,height:e.dropzone.height,dz:{x:e.dropzone.width/2,y:e.dropzone.height/2}},winds:[{altitudeDescr:"FL100",speed:null!==(n=null===(o=e.winds.fl100)||void 0===o?void 0:o.speed)&&void 0!==n?n:0,direction:null!==(a=null===(r=e.winds.fl100)||void 0===r?void 0:r.direction)&&void 0!==a?a:0},{altitudeDescr:"2000 ft",speed:null!==(s=null===(c=e.winds["2000ft"])||void 0===c?void 0:c.speed)&&void 0!==s?s:0,direction:null!==(l=null===(h=e.winds["2000ft"])||void 0===h?void 0:h.direction)&&void 0!==l?l:0},{altitudeDescr:"Ground",speed:null!==(u=null===(f=e.winds.ground)||void 0===f?void 0:f.speed)&&void 0!==u?u:0,direction:null!==(p=null===(v=e.winds.ground)||void 0===v?void 0:v.direction)&&void 0!==p?p:0}],exitCircle:i.exitCircle,deplCircle:i.deplCircle,spot:{heading:i.lineOfFlight,longitudinalOffset:i.distance,transverseOffset:i.offTrack},redLight:{bearing:i.redLight.bearing,distance:i.redLight.distance},timeBetweenGroups:i.timeBetweenGroups,jumpRunDuration:i.jumpRunDuration,time:new Date});case 8:if(w=t.sent,x=window.open(w)){t.next=12;break}return t.abrupt("return");case 12:x.onload=function(){x.focus(),x.print()};case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var nt=function(){var t=Object(n.useReducer)(et,tt),e=Object(l.a)(t,2),i=e[0],o=e[1],a=Object(n.useMemo)((function(){return function(t,e,i,n){var o,a,r,s,d,c,l,h,u,f,p,v,g,m,w={winds:[{altitude:N(1e4),direction:F(null!==(o=null===(a=e.fl100)||void 0===a?void 0:a.direction)&&void 0!==o?o:0),speed:H(null!==(r=null===(s=e.fl100)||void 0===s?void 0:s.speed)&&void 0!==r?r:0)},{altitude:N(2e3),direction:F(null!==(d=null===(c=e["2000ft"])||void 0===c?void 0:c.direction)&&void 0!==d?d:0),speed:H(null!==(l=null===(h=e["2000ft"])||void 0===h?void 0:h.speed)&&void 0!==l?l:0)},{altitude:N(0),direction:F(null!==(u=null===(f=e.ground)||void 0===f?void 0:f.direction)&&void 0!==u?u:0),speed:H(null!==(p=null===(v=e.ground)||void 0===v?void 0:v.speed)&&void 0!==p?p:0)}],fixedTrack:void 0===i.lineOfFlight?void 0:F(i.lineOfFlight),fixedTransverseOffset:void 0===i.offTrack?void 0:B(i.offTrack),allowedLandingDirections:i.landingDirection?[F(i.landingDirection)]:null===(g=t.allowedLandingDirections)||void 0===g?void 0:g.map(F),config:n},x=new Z(w).calculate(),j={lineOfFlight:R(x.track),offTrack:A(x.transverseOffset),distance:null!==(m=i.distance)&&void 0!==m?m:A(x.longitudinalOffset),deplCircle:x.deplCircle,exitCircle:x.exitCircle,redLight:{bearing:R(x.redLight.bearing),distance:A(x.redLight.distance)},landingDirection:R(x.landingDirection),timeBetweenGroups:x.timeBetweenGroups,jumpRunDuration:x.jumpRunDuration};return console.log({input:w,output:x,output2:j}),j}(i.dropzone,i.winds,i.fixedParams,i.config)}),[i.dropzone,i.winds,i.fixedParams,i.config]);return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(I,{dropzones:D,state:i,dispatch:o,spot:a,onPrint:function(){return function(t,e){return it.apply(this,arguments)}(i,a)}}),Object(k.jsx)(S,{state:i,spot:a})]})},ot=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,180)).then((function(e){var i=e.getCLS,n=e.getFID,o=e.getFCP,a=e.getLCP,r=e.getTTFB;i(t),n(t),o(t),a(t),r(t)}))};r.a.render(Object(k.jsx)(o.a.StrictMode,{children:Object(k.jsx)(nt,{})}),document.getElementById("root")),ot()},98:function(t,e,i){}},[[129,1,2]]]);
//# sourceMappingURL=main.4915eeff.chunk.js.map